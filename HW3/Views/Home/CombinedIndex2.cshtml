@model HW3.Models.Combined
@{
    ViewBag.Title = "CombinedIndex";
}

<!DOCTYPE html>
<html>
<head>
    <title>@ViewBag.Title</title>
    <!-- Include your CSS and JavaScript libraries -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.7.0/dist/js/bootstrap.bundle.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.7.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.min.js" integrity="sha512-7U4rRB8aGAHGVad3u2jiC7GA5/1YhQcQjxKeaVms/bT66i3LVBMRcBI9KwABNWnxOSwulkuSXxZLGuyfvo7V1A==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.10/css/jquery.dataTables.min.css">
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.11.10/js/jquery.dataTables.min.js"></script>
    <style>
        body {
            background-image: url('@Url.Content("~/Pics/Maintain.jpeg")');
            background-size: 3000px 1200px;
            background-repeat: no-repeat;
        }

        /* Table header background */
        th {
            background-color: #f3e4c5; /* Light beige */
        }

        /* Table rows background */
        tr {
            background-color: #f5e6c8; /* Slightly lighter beige */
        }

        /* Text color */
        table {
            color: #4c3d29; /* Dark brown text on beige */
        }

        /* Button styles */
        .btn-primary, .btn-info {
            background-color: #d2b48c; /* Light brown */
        }
/* Additional styling for content */

h2,  h3 {
    color: white; /* Set the text color of h2 and h3 to white */
}
    </style>
</head>
<body>
    <div class="container">
        <h2>Manage</h2>
        
        <p>
            <!-- Create buttons for Borrows, Authors, and Type -->

        </p>
        <div class="row">
            <div class="col-md-6">
                <h3>Types</h3>
                <button class="btn btn-primary create-link" data-url="@Url.Action("Create", "types")">Create New Author</button>
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Name</th>

                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model.types)
                        {
                            <tr>
                                <td>@Html.DisplayFor(modelItem => item.name)</td>

                                <td>
                                    <a href="#" class="edit-link btn btn-info" data-url="@Url.Action("Edit", "types", new { id = item.typeId })">Edit</a>
                                    <a href="#" class="delete-link btn btn-info" data-url="@Url.Action("Delete", "types", new { id = item.typeId })">Delete</a>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
               
                    <div class="pagination">
                        <ul class="pagination">
                            <li class="page-item"><a class="page-link" href="#">Previous</a></li>
                            <li class="page-item"><a class="page-link" href="#">1</a></li>
                            <li class="page-item"><a class="page-link" href="#">2</a></li>
                            <li class="page-item"><a class="page-link" href="#">3</a></li>
                            <li class="page-item"><a class="page-link" href="#">4</a></li>
                            <li class="page-item"><a class="page-link" href="#">5</a></li>
                            <li class="page-item"><a class="page-link" href="#">6</a></li>
                            <li class="page-item"><a class="page-link" href="#">Next</a></li>
                        </ul>
                    </div>
                
            </div>
            <div class="col-md-6">
                <h3>Borrows</h3>
                <button class="btn btn-primary create-link" data-url="@Url.Action("Create", "borrows")">Create New Borrow</button>
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Student</th>
                            <th>Book</th>
                            <th>Taken Date</th>
                            <th>Brought Date</th>
                            <th>CRUD Buttons</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model.borrows)
                        {
                            <tr>
                                <td>@Html.DisplayFor(modelItem => item.borrowId)</td>
                                <td>@Html.DisplayFor(modelItem => item.bookId)</td>
                                <td>@Html.DisplayFor(modelItem => item.broughtDate)</td>
                                <td>@Html.DisplayFor(modelItem => item.takenDate)</td>
                                <td>
                                    <a href="#" class="edit-link btn btn-info" data-url="@Url.Action("Edit", "borrows", new { id = item.borrowId })">Edit</a>
                                    <a href="#" class="delete-link btn btn-info" data-url="@Url.Action("Delete", "borrows", new { id = item.borrowId })">Delete</a>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
                <div class="pagination">
                    <ul class="pagination">
                        <li class="page-item"><a class="page-link" href="#">Previous</a></li>
                        <li class="page-item"><a class="page-link" href="#">1</a></li>
                        <li class="page-item"><a class="page-link" href="#">2</a></li>
                        <li class="page-item"><a class="page-link" href="#">3</a></li>
                        <li class="page-item"><a class="page-link" href="#">4</a></li>
                        <li class="page-item"><a class="page-link" href="#">5</a></li>
                        <li class="page-item"><a class="page-link" href="#">6</a></li>
                        <li class="page-item"><a class="page-link" href="#">Next</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-md-6">
                <h3>Authors</h3>
                <button class="btn btn-primary create-link" data-url="@Url.Action("Create", "authors")">Create New Author</button>
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Surname</th>
                            <th>CRUD Buttons</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model.authors)
                        {
                            <tr>
                                <td>@Html.DisplayFor(modelItem => item.name)</td>
                                <td>@Html.DisplayFor(modelItem => item.surname)</td>
                                <td>
                                    <a href="#" class="edit-link btn btn-info" data-url="@Url.Action("Edit", "authors", new { id = item.authorId })">Edit</a>
                                    <a href="#" class="delete-link btn btn-info" data-url="@Url.Action("Delete", "authors", new { id = item.authorId })">Delete</a>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
                <div class="pagination">
                    <ul class="pagination">
                        <li class="page-item"><a class="page-link" href="#">Previous</a></li>
                        <li class="page-item"><a class="page-link" href="#">1</a></li>
                        <li class="page-item"><a class="page-link" href="#">2</a></li>
                        <li class="page-item"><a class="page-link" href="#">3</a></li>
                        <li class="page-item"><a class="page-link" href="#">4</a></li>
                        <li class="page-item"><a class="page-link" href="#">5</a></li>
                        <li class="page-item"><a class="page-link" href="#">6</a></li>
                        <li class="page-item"><a class="page-link" href="#">Next</a></li>
                    </ul>
                </div>
            </div>


        </div>
        <hr />
    </div>

    <!-- Modals for Create/Edit/Delete actions -->
    <!-- Modal for creating Borrows -->
    <div class="modal fade" id="createBorrowModal" tabindex="-1" role="dialog" aria-labelledby="createBorrowModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="createBorrowModalLabel">Create New Borrow</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <!-- Add your form for creating a new Borrow here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for editing Borrows (similar modals for Authors and Type) -->
    <div class="modal fade" id="editBorrowModal" tabindex="-1" role="dialog" aria-labelledby="editBorrowModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editBorrowModalLabel">Edit Borrow</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <!-- Add your form for editing a Borrow here -->
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="createTypeModal" tabindex="-1" role="dialog" aria-labelledby="createTypeModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="createTypeModalLabel">Create New Type</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <!-- Add your form for creating a new Type here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for editing a Type (similar modals for Create and Delete actions) -->
    <div class="modal fade" id="editTypeModal" tabindex="-1" role="dialog" aria-labelledby="editTypeModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editTypeModalLabel">Edit Type</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <!-- Add your form for editing a Type here -->
                </div>
            </div>
        </div>
    </div>
    <!-- Modal for deleting an Author -->
    <!-- Modal for deleting a Type -->
    <div class="modal fade" id="deleteTypeModal" tabindex="-1" role="dialog" aria-labelledby="deleteTypeModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="deleteTypeModalLabel">Delete Type</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Are you sure you want to delete this Type?</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger" id="confirmDeleteType">Delete</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="deleteAuthorModal" tabindex="-1" role="dialog" aria-labelledby="deleteAuthorModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="deleteAuthorModalLabel">Delete Author</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Are you sure you want to delete this Author?</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger" id="confirmDeleteAuthor">Delete</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for deleting a Borrow -->
    <div class="modal fade" id="deleteBorrowModal" tabindex="-1" role="dialog" aria-labelledby="deleteBorrowModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="deleteBorrowModalLabel">Delete Borrow</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Are you sure you want to delete this Borrow?</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger" id="confirmDeleteBorrow">Delete</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add modals for other entities (Authors, Type, Delete actions) as needed -->
    <!-- Add your JavaScript code for handling modals and CRUD actions -->
</body>
<!-- Add this JavaScript code at the end of your HTML document, just before </body> -->
<script>
    // Function to handle Delete Borrow
    $("#confirmDeleteBorrow").click(function () {
        // Perform the delete action for Borrow
        var borrowId = /* Get the Borrow ID you want to delete */;
        $.ajax({
            type: "POST",
            url: "/borrows/Delete/" + borrowId, // Replace with the correct endpoint
            success: function () {
                // Handle success, e.g., remove the deleted Borrow from the UI
                $("#deleteBorrowModal").modal("hide");
                // Reload the page or update the view as needed
                location.reload();
            },
            error: function (error) {
                // Handle error
                console.log("Error deleting Borrow: " + error);
            }
        });
    });

    // Function to handle Delete Author
    $("#confirmDeleteAuthor").click(function () {
        // Perform the delete action for Author
        var authorId = /* Get the Author ID you want to delete */;
        $.ajax({
            type: "POST",
            url: "/authors/Delete/" + authorId, // Replace with the correct endpoint
            success: function () {
                // Handle success, e.g., remove the deleted Author from the UI
                $("#deleteAuthorModal").modal("hide");
                // Reload the page or update the view as needed
                location.reload();
            },
            error: function (error) {
                // Handle error
                console.log("Error deleting Author: " + error);
            }
        });
    });

    // Function to handle Delete Type
    $("#confirmDeleteType").click(function () {
        // Perform the delete action for Type
        var typeId = /* Get the Type ID you want to delete */;
        $.ajax({
            type: "POST",
            url: "/types/Delete/" + typeId, // Replace with the correct endpoint
            success: function () {
                // Handle success, e.g., remove the deleted Type from the UI
                $("#deleteTypeModal").modal("hide");
                // Reload the page or update the view as needed
                location.reload();
            },
            error: function (error) {
                // Handle error
                console.log("Error deleting Type: " + error);
            }
        });
    });
</script>

<script>
    // Function to handle Create buttons for Borrows, Authors, and Type
    $(".create-link").click(function (e) {
        e.preventDefault();
        var url = $(this).data("url");

        $.get(url, function (data) {
            // Replace modal-body content with the retrieved form
            $("#createBorrowModal .modal-body").html(data);
            // Show the modal
            $("#createBorrowModal").modal("show");
        });
    });

    // Function to handle Edit buttons for Borrows, Authors, and Type
    $(".edit-link").click(function (e) {
        e.preventDefault();
        var url = $(this).data("url");

        $.get(url, function (data) {
            // Replace modal-body content with the retrieved form
            $("#editBorrowModal .modal-body").html(data);
            // Show the modal
            $("#editBorrowModal").modal("show");
        });
    });

    // Function to handle Delete buttons for Borrows, Authors, and Type
    $(".delete-link").click(function (e) {
        e.preventDefault();
        var url = $(this).data("url");

        if (confirm("Are you sure you want to delete this record?")) {
            $.post(url, function () {
                // Reload the page or update the view as needed
                location.reload();
            });
        }
    });

    // Additional JavaScript code for form submissions, validation, etc. can be added here.
</script>

</html>
